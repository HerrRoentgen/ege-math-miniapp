<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Gann Monitor - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            padding: 15px;
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 1.5em;
            color: var(--tg-theme-text-color, #000);
            margin-bottom: 5px;
        }
        
        .header h2 {
            font-size: 1em;
            color: var(--tg-theme-hint-color, #666);
            font-weight: normal;
        }
        
        .current-status {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .status-card {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
        }
        
        .status-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--tg-theme-accent-text-color, #3390ec);
            margin-bottom: 5px;
        }
        
        .status-label {
            font-size: 0.8em;
            color: var(--tg-theme-hint-color, #666);
        }
        
        .price-input {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .price-input label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--tg-theme-text-color, #000);
        }
        
        .input-group {
            display: flex;
            gap: 10px;
        }
        
        .price-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            border-radius: 8px;
            font-size: 16px;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000);
        }
        
        .btn {
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            touch-action: manipulation;
            transition: opacity 0.2s;
        }
        
        .btn:active {
            opacity: 0.7;
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .control-btn {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            color: var(--tg-theme-text-color, #000);
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            touch-action: manipulation;
            transition: all 0.2s;
        }
        
        .control-btn.active {
            background-color: var(--tg-theme-accent-text-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .countdown-container {
            margin-bottom: 20px;
        }
        
        .countdown-card {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--tg-theme-hint-color, #666);
            position: relative;
        }
        
        .countdown-card.active {
            border-left-color: #ff6b6b;
            background-color: rgba(255, 107, 107, 0.1);
            animation: pulse 2s infinite;
        }
        
        .countdown-card.upcoming {
            border-left-color: #51cf66;
        }
        
        .countdown-card.passed {
            opacity: 0.6;
            border-left-color: #adb5bd;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
        }
        
        .date-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .target-date {
            font-weight: bold;
            color: var(--tg-theme-text-color, #000);
        }
        
        .days-left {
            background-color: var(--tg-theme-accent-text-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        
        .price-targets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 10px 0;
        }
        
        .price-target {
            background-color: var(--tg-theme-bg-color, #ffffff);
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .target-label {
            font-size: 0.7em;
            color: var(--tg-theme-hint-color, #666);
            margin-bottom: 4px;
        }
        
        .target-price {
            font-weight: bold;
            color: var(--tg-theme-accent-text-color, #3390ec);
            font-size: 0.9em;
        }
        
        .alert-zone {
            background-color: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            text-align: center;
            font-size: 0.9em;
            display: none;
        }
        
        .alert-zone.active {
            display: block;
            animation: alertBlink 1s infinite;
        }
        
        @keyframes alertBlink {
            0%, 100% { background-color: rgba(255, 193, 7, 0.2); }
            50% { background-color: rgba(255, 193, 7, 0.4); }
        }
        
        .trading-panel {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .trading-panel h3 {
            margin-bottom: 15px;
            color: var(--tg-theme-text-color, #000);
        }
        
        .signal-item {
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            border-left: 4px solid;
        }
        
        .signal-strong { border-left-color: #ff6b6b; }
        .signal-medium { border-left-color: #ffa726; }
        .signal-weak { border-left-color: #51cf66; }
        
        .base-point-manager {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .base-point-manager h3 {
            margin-bottom: 15px;
            color: var(--tg-theme-text-color, #000);
        }
        
        .base-card {
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 8px;
            padding: 12px;
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            margin-bottom: 15px;
        }
        
        .base-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .base-type {
            background-color: var(--tg-theme-accent-text-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .base-type.minimum {
            background-color: #ff6b6b;
        }
        
        .base-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            font-size: 0.9em;
        }
        
        .new-base-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .new-base-form, .base-history {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid var(--tg-theme-accent-text-color, #3390ec);
        }
        
        .new-base-form h4, .base-history h4 {
            margin-bottom: 15px;
            color: var(--tg-theme-text-color, #000);
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--tg-theme-text-color, #000);
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            border-radius: 8px;
            font-size: 16px;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000);
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background-color: var(--tg-theme-bg-color, #ffffff);
            border: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .radio-item:hover {
            background-color: rgba(51, 144, 236, 0.1);
        }
        
        .radio-item input[type="radio"] {
            margin-right: 8px;
            width: auto;
        }
        
        .radio-item input[type="radio"]:checked + span {
            color: var(--tg-theme-accent-text-color, #3390ec);
            font-weight: bold;
        }
        
        .form-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .history-item {
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--tg-theme-accent-text-color, #3390ec);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .history-item:hover {
            background-color: rgba(51, 144, 236, 0.05);
        }
        
        .history-item.active {
            border-left-color: #51cf66;
            background-color: rgba(81, 207, 102, 0.1);
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .history-details {
            font-size: 0.9em;
            color: var(--tg-theme-hint-color, #666);
        }
        
        .switch-base-btn {
            background-color: var(--tg-theme-accent-text-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            cursor: pointer;
        }
        
        .delete-base-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 8px;
        }
        
        .accuracy-tracker {
            background-color: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .telegram-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-top: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);
            padding: 10px;
            display: flex;
            gap: 10px;
        }
        
        .telegram-btn {
            flex: 1;
            background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            touch-action: manipulation;
        }
        
        .telegram-btn:active {
            opacity: 0.7;
        }
        
        .main-content {
            padding-bottom: 70px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏ */
        }
        
        .haptic-feedback {
            transition: transform 0.1s;
        }
        
        .haptic-feedback:active {
            transform: scale(0.98);
        }
        
        @media (max-width: 360px) {
            .current-status {
                grid-template-columns: 1fr;
            }
            
            .price-targets {
                grid-template-columns: 1fr;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <div class="header">
                <h1>üéØ Gann Monitor</h1>
                <h2>EUR/USD –ø—Ä–æ–≥–Ω–æ–∑—ã</h2>
                <div id="currentTime" style="font-size: 0.8em; color: var(--tg-theme-hint-color, #666); margin-top: 5px;"></div>
            </div>

            <div class="current-status">
                <div class="status-card">
                    <div class="status-value" id="currentPrice">1.1300</div>
                    <div class="status-label">–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="daysPassed">38</div>
                    <div class="status-label">–î–Ω–µ–π –æ—Ç –º–∞–∫—Å.</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="nextAlert">11</div>
                    <div class="status-label">–î–æ —Ü–µ–ª–∏</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="accuracy">75%</div>
                    <div class="status-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
            </div>

            <div class="price-input">
                <label>–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É EUR/USD:</label>
                <div class="input-group">
                    <input type="number" id="priceUpdate" step="0.0001" min="1.0000" max="1.3000" placeholder="1.1300">
                    <button class="btn haptic-feedback" onclick="updateCurrentPrice()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
            </div>

            <div class="base-point-manager">
                <h3>üìç –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</h3>
                <div class="current-base-info">
                    <div class="base-card">
                        <div class="base-header">
                            <span>–ê–∫—Ç–∏–≤–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç:</span>
                            <span id="activeBaseType" class="base-type">–ú–ê–ö–°–ò–ú–£–ú</span>
                        </div>
                        <div class="base-details">
                            <div>–¶–µ–Ω–∞: <strong id="activeBasePrice">1.1572</strong></div>
                            <div>–î–∞—Ç–∞: <strong id="activeBaseDate">21.04.2025</strong></div>
                            <div>–î–Ω–µ–π –Ω–∞–∑–∞–¥: <strong id="activBaseDays">38</strong></div>
                        </div>
                    </div>
                </div>
                
                <div class="new-base-controls">
                    <button class="control-btn haptic-feedback" onclick="showNewBaseForm()">‚ûï –ù–æ–≤–∞—è –±–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞</button>
                    <button class="control-btn haptic-feedback" onclick="showBaseHistory()">üìã –ò—Å—Ç–æ—Ä–∏—è —Ç–æ—á–µ–∫</button>
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ –Ω–æ–≤–æ–π –±–∞–∑–æ–≤–æ–π —Ç–æ—á–∫–∏ -->
            <div id="newBaseForm" class="new-base-form" style="display: none;">
                <h4>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–≤–∞–¥—Ä–∞—Ç –ì–∞–Ω–∞</h4>
                <div class="form-group">
                    <label>–¢–∏–ø —Ç–æ—á–∫–∏:</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="baseType" value="high" checked>
                            <span>üìà –ú–∞–∫—Å–∏–º—É–º</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="baseType" value="low">
                            <span>üìâ –ú–∏–Ω–∏–º—É–º</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>–¶–µ–Ω–∞:</label>
                    <input type="number" id="newBasePrice" step="0.0001" min="0.8000" max="1.5000" placeholder="1.1800">
                </div>
                <div class="form-group">
                    <label>–î–∞—Ç–∞:</label>
                    <input type="date" id="newBaseDate">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                    <input type="text" id="newBaseDescription" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ—Ä—ã–≤ –ø–æ—Å–ª–µ NFP">
                </div>
                <div class="form-actions">
                    <button class="btn haptic-feedback" onclick="createNewBase()">‚úÖ –°–æ–∑–¥–∞—Ç—å –∫–≤–∞–¥—Ä–∞—Ç</button>
                    <button class="control-btn haptic-feedback" onclick="hideNewBaseForm()">‚ùå –û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è –±–∞–∑–æ–≤—ã—Ö —Ç–æ—á–µ–∫ -->
            <div id="baseHistory" class="base-history" style="display: none;">
                <h4>–ò—Å—Ç–æ—Ä–∏—è –±–∞–∑–æ–≤—ã—Ö —Ç–æ—á–µ–∫</h4>
                <div id="baseHistoryList"></div>
                <button class="control-btn haptic-feedback" onclick="hideBaseHistory()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>

            <div class="controls">
                <button class="control-btn active haptic-feedback" onclick="toggleAlerts()" id="alertsBtn">üîî –ê–ª–µ—Ä—Ç—ã –í–ö–õ</button>
                <button class="control-btn haptic-feedback" onclick="toggleVibration()" id="vibrateBtn">üì≥ –í–∏–±—Ä–∞—Ü–∏—è –í–ö–õ</button>
                <button class="control-btn haptic-feedback" onclick="shareResults()">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
                <button class="control-btn haptic-feedback" onclick="resetAccuracy()">üîÑ –°–±—Ä–æ—Å</button>
            </div>

            <div id="countdownContainer" class="countdown-container"></div>

            <div class="trading-panel">
                <h3>üìà –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã</h3>
                <div id="tradingSignals">
                    <div style="text-align: center; color: var(--tg-theme-hint-color, #666); padding: 20px;">
                        –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ—Ç
                    </div>
                </div>
            </div>

            <div class="accuracy-tracker">
                <h3>üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏</h3>
                <div id="accuracyList">
                    <div style="text-align: center; color: var(--tg-theme-hint-color, #666); padding: 10px;">
                        –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è...
                    </div>
                </div>
            </div>
        </div>

        <div class="telegram-actions">
            <button class="telegram-btn" onclick="sendToChat()">üí¨ –í —á–∞—Ç</button>
            <button class="telegram-btn" onclick="setReminder()">‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
        function applyTelegramTheme() {
            const root = document.documentElement;
            if (tg.colorScheme === 'dark') {
                root.style.setProperty('--tg-theme-bg-color', '#212121');
                root.style.setProperty('--tg-theme-text-color', '#ffffff');
                root.style.setProperty('--tg-theme-secondary-bg-color', '#424242');
            }
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentPrice = 1.1300;
        let alertsEnabled = true;
        let vibrationEnabled = true;
        
        // –°–∏—Å—Ç–µ–º–∞ –±–∞–∑–æ–≤—ã—Ö —Ç–æ—á–µ–∫
        let basePoints = JSON.parse(localStorage.getItem('gannBasePoints') || '[]');
        let activeBaseIndex = parseInt(localStorage.getItem('activeBaseIndex') || '0');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Ç–æ—á–µ–∫, –µ—Å–ª–∏ –ø—É—Å—Ç–æ
        if (basePoints.length === 0) {
            basePoints = [{
                id: 1,
                type: 'high',
                price: 1.1572,
                date: new Date('2025-04-21'),
                description: '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –º–∞–∫—Å–∏–º—É–º',
                created: new Date()
            }];
            localStorage.setItem('gannBasePoints', JSON.stringify(basePoints));
        }
        
        let accuracyData = JSON.parse(localStorage.getItem('gannAccuracy') || '[]');

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –±–∞–∑–æ–≤–æ–π —Ç–æ—á–∫–∏
        function generateGannForecasts() {
            if (basePoints.length === 0) return [];
            
            const activeBase = basePoints[activeBaseIndex];
            const basePrice = activeBase.price;
            const baseDate = new Date(activeBase.date);
            const isHigh = activeBase.type === 'high';
            
            // –ö–ª—é—á–µ–≤—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã –ì–∞–Ω–∞
            const cycles = [49, 64, 81, 100, 121, 144, 169, 196, 225];
            
            return cycles.map(days => {
                const targetDate = new Date(baseDate);
                targetDate.setDate(targetDate.getDate() + days);
                
                // –†–∞—Å—á–µ—Ç —Ü–µ–ª–µ–≤—ã—Ö —É—Ä–æ–≤–Ω–µ–π
                let targets;
                if (isHigh) {
                    // –û—Ç –º–∞–∫—Å–∏–º—É–º–∞ - —Ü–µ–ª–∏ –≤–Ω–∏–∑
                    targets = {
                        strong: basePrice - (days * 0.0001),
                        medium: basePrice - (days * 0.00005),
                        priceSquared: calculatePriceSquaredTarget(basePrice, days, false)
                    };
                } else {
                    // –û—Ç –º–∏–Ω–∏–º—É–º–∞ - —Ü–µ–ª–∏ –≤–≤–µ—Ä—Ö
                    targets = {
                        strong: basePrice + (days * 0.0001),
                        medium: basePrice + (days * 0.00005),
                        priceSquared: calculatePriceSquaredTarget(basePrice, days, true)
                    };
                }
                
                return {
                    days,
                    date: targetDate,
                    targets,
                    status: 'upcoming'
                };
            });
        }
        
        function calculatePriceSquaredTarget(basePrice, days, isUpward) {
            const basePips = Math.round(basePrice * 10000);
            const sqrtPips = Math.sqrt(basePips);
            const adjustment = (days - 64) * 0.3; // 64 - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
            const newSqrt = isUpward ? sqrtPips + adjustment : sqrtPips - adjustment;
            const newPrice = Math.pow(Math.abs(newSqrt), 2) / 10000;
            return Math.max(0.8000, Math.min(1.5000, newPrice));
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç–∏–≤–Ω–æ–π –±–∞–∑–æ–≤–æ–π —Ç–æ—á–∫–µ
        function updateActiveBaseInfo() {
            if (basePoints.length === 0) return;
            
            const activeBase = basePoints[activeBaseIndex];
            const now = new Date();
            const daysPassed = Math.floor((now - new Date(activeBase.date)) / (1000 * 60 * 60 * 24));
            
            document.getElementById('activeBaseType').textContent = 
                activeBase.type === 'high' ? '–ú–ê–ö–°–ò–ú–£–ú' : '–ú–ò–ù–ò–ú–£–ú';
            document.getElementById('activeBaseType').className = 
                'base-type ' + (activeBase.type === 'high' ? '' : 'minimum');
            document.getElementById('activeBasePrice').textContent = activeBase.price.toFixed(4);
            document.getElementById('activeBaseDate').textContent = 
                new Date(activeBase.date).toLocaleDateString('ru-RU');
            document.getElementById('activBaseDays').textContent = daysPassed;
        }
        
        function showNewBaseForm() {
            hapticFeedback('light');
            document.getElementById('newBaseForm').style.display = 'block';
            document.getElementById('newBaseDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('newBasePrice').value = currentPrice.toFixed(4);
        }
        
        function hideNewBaseForm() {
            hapticFeedback('light');
            document.getElementById('newBaseForm').style.display = 'none';
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('newBasePrice').value = '';
            document.getElementById('newBaseDate').value = '';
            document.getElementById('newBaseDescription').value = '';
            document.querySelector('input[name="baseType"][value="high"]').checked = true;
        }
        
        function createNewBase() {
            hapticFeedback('medium');
            
            const price = parseFloat(document.getElementById('newBasePrice').value);
            const date = document.getElementById('newBaseDate').value;
            const description = document.getElementById('newBaseDescription').value || '–ù–æ–≤–∞—è —Ç–æ—á–∫–∞';
            const type = document.querySelector('input[name="baseType"]:checked').value;
            
            if (!price || !date || price < 0.8000 || price > 1.5000) {
                tg.showAlert('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö');
                return;
            }
            
            const newBase = {
                id: Date.now(),
                type,
                price,
                date: new Date(date),
                description,
                created: new Date()
            };
            
            basePoints.push(newBase);
            activeBaseIndex = basePoints.length - 1;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º
            localStorage.setItem('gannBasePoints', JSON.stringify(basePoints));
            localStorage.setItem('activeBaseIndex', activeBaseIndex.toString());
            
            hideNewBaseForm();
            updateActiveBaseInfo();
            renderCountdowns();
            updateTradingSignals();
            
            tg.showAlert(`–ù–æ–≤—ã–π ${type === 'high' ? '–º–∞–∫—Å–∏–º—É–º' : '–º–∏–Ω–∏–º—É–º'} —Å–æ–∑–¥–∞–Ω: ${price.toFixed(4)}`);
        }
        
        function showBaseHistory() {
            hapticFeedback('light');
            document.getElementById('baseHistory').style.display = 'block';
            renderBaseHistory();
        }
        
        function hideBaseHistory() {
            hapticFeedback('light');
            document.getElementById('baseHistory').style.display = 'none';
        }
        
        function renderBaseHistory() {
            const container = document.getElementById('baseHistoryList');
            
            if (basePoints.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--tg-theme-hint-color, #666);">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫</div>';
                return;
            }
            
            container.innerHTML = basePoints.map((base, index) => `
                <div class="history-item ${index === activeBaseIndex ? 'active' : ''}">
                    <div class="history-header">
                        <div>
                            <strong>${base.type === 'high' ? 'üìà' : 'üìâ'} ${base.price.toFixed(4)}</strong>
                            <div style="font-size: 0.8em; color: var(--tg-theme-hint-color, #666);">
                                ${new Date(base.date).toLocaleDateString('ru-RU')}
                            </div>
                        </div>
                        <div>
                            ${index !== activeBaseIndex ? 
                                `<button class="switch-base-btn" onclick="switchToBase(${index})">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>` : 
                                '<span style="color: #51cf66; font-weight: bold;">–ê–ö–¢–ò–í–ï–ù</span>'
                            }
                            ${basePoints.length > 1 ? 
                                `<button class="delete-base-btn" onclick="deleteBase(${index})">üóëÔ∏è</button>` : ''
                            }
                        </div>
                    </div>
                    <div class="history-details">
                        ${base.description}
                    </div>
                </div>
            `).join('');
        }
        
        function switchToBase(index) {
            hapticFeedback('medium');
            
            if (index < 0 || index >= basePoints.length) return;
            
            activeBaseIndex = index;
            localStorage.setItem('activeBaseIndex', activeBaseIndex.toString());
            
            updateActiveBaseInfo();
            renderCountdowns();
            updateTradingSignals();
            renderBaseHistory();
            
            const base = basePoints[index];
            tg.showAlert(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ ${base.type === 'high' ? '–º–∞–∫—Å–∏–º—É–º' : '–º–∏–Ω–∏–º—É–º'} ${base.price.toFixed(4)}`);
        }
        
        function deleteBase(index) {
            hapticFeedback('light');
            
            if (basePoints.length <= 1) {
                tg.showAlert('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –±–∞–∑–æ–≤—É—é —Ç–æ—á–∫—É');
                return;
            }
            
            const base = basePoints[index];
            tg.showConfirm(`–£–¥–∞–ª–∏—Ç—å —Ç–æ—á–∫—É ${base.price.toFixed(4)} –æ—Ç ${new Date(base.date).toLocaleDateString('ru-RU')}?`, (confirmed) => {
                if (confirmed) {
                    basePoints.splice(index, 1);
                    
                    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å
                    if (activeBaseIndex >= index) {
                        activeBaseIndex = Math.max(0, activeBaseIndex - 1);
                    }
                    
                    localStorage.setItem('gannBasePoints', JSON.stringify(basePoints));
                    localStorage.setItem('activeBaseIndex', activeBaseIndex.toString());
                    
                    updateActiveBaseInfo();
                    renderCountdowns();
                    updateTradingSignals();
                    renderBaseHistory();
                    
                    tg.showAlert('–¢–æ—á–∫–∞ —É–¥–∞–ª–µ–Ω–∞');
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ —Å —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é
        function hapticFeedback(type = 'impact') {
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred(type);
            }
        }

        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = 
                now.toLocaleString('ru-RU', { 
                    day: '2-digit', 
                    month: '2-digit', 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
            if (basePoints.length > 0) {
                const activeBase = basePoints[activeBaseIndex];
                const daysPassed = Math.floor((now - new Date(activeBase.date)) / (1000 * 60 * 60 * 24));
                document.getElementById('daysPassed').textContent = daysPassed;
                
                const gannForecasts = generateGannForecasts();
                const nextForecast = gannForecasts.find(f => f.date > now);
                if (nextForecast) {
                    const daysLeft = Math.ceil((nextForecast.date - now) / (1000 * 60 * 60 * 24));
                    document.getElementById('nextAlert').textContent = daysLeft;
                }
            }
        }

        function updateCurrentPrice() {
            hapticFeedback('light');
            const newPrice = parseFloat(document.getElementById('priceUpdate').value);
            
            if (newPrice && newPrice > 1.0000 && newPrice < 1.3000) {
                currentPrice = newPrice;
                document.getElementById('currentPrice').textContent = newPrice.toFixed(4);
                document.getElementById('priceUpdate').value = '';
                
                localStorage.setItem('currentPrice', newPrice.toString());
                
                checkPriceAlerts();
                updateTradingSignals();
                renderCountdowns();
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram
                tg.showAlert(`–¶–µ–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞: ${newPrice.toFixed(4)}`);
            } else {
                tg.showAlert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ü–µ–Ω—É –æ—Ç 1.0000 –¥–æ 1.3000');
            }
        }

        function checkPriceAlerts() {
            const now = new Date();
            const gannForecasts = generateGannForecasts();
            
            gannForecasts.forEach(forecast => {
                const daysUntil = Math.ceil((forecast.date - now) / (1000 * 60 * 60 * 24));
                
                if (daysUntil <= 3 && daysUntil >= -1) {
                    const tolerance = 0.0020;
                    
                    Object.entries(forecast.targets).forEach(([type, target]) => {
                        if (Math.abs(currentPrice - target) <= tolerance) {
                            if (alertsEnabled) {
                                tg.showAlert(`üéØ GANN ALERT!\n–¶–µ–Ω–∞ ${currentPrice.toFixed(4)} –±–ª–∏–∑–∫–æ –∫ —Ü–µ–ª–∏ ${target.toFixed(4)}\n–¢–∏–ø: ${type}`);
                            }
                            
                            if (vibrationEnabled) {
                                hapticFeedback('heavy');
                            }
                        }
                    });
                }
            });
        }

        function renderCountdowns() {
            const container = document.getElementById('countdownContainer');
            const now = new Date();
            const gannForecasts = generateGannForecasts();
            
            container.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –±–ª–∏–∂–∞–π—à–∏–µ 6 –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
            gannForecasts.slice(0, 6).forEach(forecast => {
                const daysUntil = Math.ceil((forecast.date - now) / (1000 * 60 * 60 * 24));
                
                let cardClass = 'countdown-card ';
                if (daysUntil <= 0) cardClass += 'passed';
                else if (daysUntil <= 3) cardClass += 'active';
                else cardClass += 'upcoming';
                
                const card = document.createElement('div');
                card.className = cardClass;
                
                const targets = forecast.targets;
                const distances = {
                    strong: Math.abs(currentPrice - targets.strong),
                    medium: Math.abs(currentPrice - targets.medium),
                    priceSquared: Math.abs(currentPrice - targets.priceSquared)
                };
                const closestTarget = Object.keys(distances).reduce((a, b) => 
                    distances[a] < distances[b] ? a : b);
                
                card.innerHTML = `
                    <div class="date-header">
                        <div class="target-date">${forecast.date.toLocaleDateString('ru-RU')}</div>
                        <div class="days-left">${daysUntil > 0 ? `${daysUntil}–¥` : '–ü—Ä–æ—à–ª–æ'}</div>
                    </div>
                    
                    <div class="price-targets">
                        <div class="price-target" style="${closestTarget === 'strong' ? 'border-color: var(--tg-theme-accent-text-color, #3390ec); border-width: 2px;' : ''}">
                            <div class="target-label">–°–∏–ª—å–Ω–∞—è</div>
                            <div class="target-price">${targets.strong.toFixed(4)}</div>
                        </div>
                        <div class="price-target" style="${closestTarget === 'medium' ? 'border-color: var(--tg-theme-accent-text-color, #3390ec); border-width: 2px;' : ''}">
                            <div class="target-label">–°—Ä–µ–¥–Ω—è—è</div>
                            <div class="target-price">${targets.medium.toFixed(4)}</div>
                        </div>
                        <div class="price-target" style="${closestTarget === 'priceSquared' ? 'border-color: var(--tg-theme-accent-text-color, #3390ec); border-width: 2px;' : ''}">
                            <div class="target-label">Price¬≤</div>
                            <div class="target-price">${targets.priceSquared.toFixed(4)}</div>
                        </div>
                    </div>
                    
                    <div class="alert-zone ${daysUntil <= 3 && daysUntil >= -1 ? 'active' : ''}">
                        üö® –í–ù–ò–ú–ê–ù–ò–ï! –¶–µ–ª—å –±–ª–∏–∑–∫–æ!
                    </div>
                    
                    <div style="font-size: 0.8em; color: var(--tg-theme-hint-color, #666); margin-top: 8px; text-align: center;">
                        –ë–ª–∏–∂–∞–π—à–∞—è: ${targets[closestTarget].toFixed(4)} (${(distances[closestTarget] * 10000).toFixed(0)} –ø–∏–ø.)
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function updateTradingSignals() {
            const container = document.getElementById('tradingSignals');
            const now = new Date();
            const gannForecasts = generateGannForecasts();
            let signals = [];
            
            gannForecasts.forEach(forecast => {
                const daysUntil = Math.ceil((forecast.date - now) / (1000 * 60 * 60 * 24));
                
                if (daysUntil <= 7 && daysUntil >= -2) {
                    const tolerance = 0.0030;
                    
                    Object.entries(forecast.targets).forEach(([type, target]) => {
                        const distance = Math.abs(currentPrice - target);
                        
                        if (distance <= tolerance) {
                            const strength = distance <= 0.0010 ? 'strong' : 
                                           distance <= 0.0020 ? 'medium' : 'weak';
                            const direction = currentPrice > target ? 'SELL' : 'BUY';
                            
                            signals.push({
                                date: forecast.date.toLocaleDateString('ru-RU'),
                                direction,
                                target: target.toFixed(4),
                                strength,
                                distance: (distance * 10000).toFixed(0),
                                type
                            });
                        }
                    });
                }
            });
            
            if (signals.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: var(--tg-theme-hint-color, #666); padding: 20px;">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ—Ç</div>';
                return;
            }
            
            container.innerHTML = signals.map(signal => `
                <div class="signal-item signal-${signal.strength}">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <strong>${signal.direction}</strong>
                        <span style="font-size: 0.9em;">${signal.target}</span>
                    </div>
                    <div style="font-size: 0.8em; color: var(--tg-theme-hint-color, #666);">
                        ${signal.date} ‚Ä¢ ${signal.distance} –ø–∏–ø. ‚Ä¢ ${signal.type}
                    </div>
                </div>
            `).join('');
        }

        function toggleAlerts() {
            hapticFeedback('light');
            alertsEnabled = !alertsEnabled;
            const btn = document.getElementById('alertsBtn');
            btn.textContent = alertsEnabled ? 'üîî –ê–ª–µ—Ä—Ç—ã –í–ö–õ' : 'üîî –ê–ª–µ—Ä—Ç—ã –í–´–ö–õ';
            btn.classList.toggle('active', alertsEnabled);
        }

        function toggleVibration() {
            hapticFeedback('light');
            vibrationEnabled = !vibrationEnabled;
            const btn = document.getElementById('vibrateBtn');
            btn.textContent = vibrationEnabled ? 'üì≥ –í–∏–±—Ä–∞—Ü–∏—è –í–ö–õ' : 'üì≥ –í–∏–±—Ä–∞—Ü–∏—è –í–´–ö–õ';
            btn.classList.toggle('active', vibrationEnabled);
        }

        function shareResults() {
            hapticFeedback('medium');
            const gannForecasts = generateGannForecasts();
            const nextForecast = gannForecasts.find(f => f.date > new Date());
            
            if (nextForecast) {
                const activeBase = basePoints[activeBaseIndex];
                const message = `üéØ Gann Analysis EUR/USD
–ë–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞: ${activeBase.type === 'high' ? 'üìà –ú–∞–∫—Å–∏–º—É–º' : 'üìâ –ú–∏–Ω–∏–º—É–º'} ${activeBase.price.toFixed(4)} (${new Date(activeBase.date).toLocaleDateString('ru-RU')})
–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: ${currentPrice.toFixed(4)}
–°–ª–µ–¥—É—é—â–∞—è —Ü–µ–ª—å: ${nextForecast.date.toLocaleDateString('ru-RU')}
–£—Ä–æ–≤–Ω–∏: ${Object.values(nextForecast.targets).map(t => t.toFixed(4)).join(' | ')}`;
                
                tg.switchInlineQuery(message);
            }
        }

        function sendToChat() {
            hapticFeedback('medium');
            const activeBase = basePoints[activeBaseIndex];
            const gannForecasts = generateGannForecasts();
            const nextForecast = gannForecasts.find(f => f.date > new Date());
            
            const message = `üìä Gann Monitor Update
–ë–∞–∑–æ–≤–∞—è —Ç–æ—á–∫–∞: ${activeBase.type === 'high' ? 'üìà' : 'üìâ'} ${activeBase.price.toFixed(4)}
EUR/USD: ${currentPrice.toFixed(4)}
–°—Ç–∞—Ç—É—Å: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω
–°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: ${nextForecast?.date.toLocaleDateString('ru-RU') || 'TBD'}`;
            
            tg.sendData(JSON.stringify({
                action: 'share_update',
                message: message,
                price: currentPrice,
                basePoint: activeBase,
                timestamp: new Date().toISOString()
            }));
        }

        function setReminder() {
            hapticFeedback('medium');
            const gannForecasts = generateGannForecasts();
            const nextForecast = gannForecasts.find(f => f.date > new Date());
            
            if (nextForecast) {
                tg.showAlert(`–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ ${nextForecast.date.toLocaleDateString('ru-RU')}`);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
                tg.sendData(JSON.stringify({
                    action: 'set_reminder',
                    date: nextForecast.date.toISOString(),
                    targets: nextForecast.targets,
                    basePoint: basePoints[activeBaseIndex]
                }));
            }
        }

        function resetAccuracy() {
            hapticFeedback('light');
            tg.showConfirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ—á–Ω–æ—Å—Ç–∏?', (confirmed) => {
                if (confirmed) {
                    accuracyData = [];
                    localStorage.removeItem('gannAccuracy');
                    updateAccuracy();
                    tg.showAlert('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±—Ä–æ—à–µ–Ω–∞');
                }
            });
        }

        function updateAccuracy() {
            if (accuracyData.length === 0) {
                document.getElementById('accuracy').textContent = '–ù/–î';
                document.getElementById('accuracyList').innerHTML = 
                    '<div style="text-align: center; color: var(--tg-theme-hint-color, #666); padding: 10px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>';
                return;
            }
            
            const hits = accuracyData.filter(item => item.result === 'hit').length;
            const total = accuracyData.filter(item => item.result !== 'pending').length;
            const accuracy = total > 0 ? Math.round((hits / total) * 100) : 0;
            
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            
            document.getElementById('accuracyList').innerHTML = accuracyData.slice(-5).map(item => `
                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--tg-theme-section-separator-color, #e0e0e0);">
                    <span style="font-size: 0.9em;">${item.date} - ${item.target}</span>
                    <span style="font-size: 0.9em;">${
                        item.result === 'hit' ? '‚úÖ' : 
                        item.result === 'miss' ? '‚ùå' : '‚è≥'
                    }</span>
                </div>
            `).join('');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            applyTelegramTheme();
            
            const savedPrice = localStorage.getItem('currentPrice');
            if (savedPrice) {
                currentPrice = parseFloat(savedPrice);
                document.getElementById('currentPrice').textContent = currentPrice.toFixed(4);
            }
            
            // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ activeBaseIndex –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
            if (activeBaseIndex >= basePoints.length) {
                activeBaseIndex = 0;
                localStorage.setItem('activeBaseIndex', '0');
            }
            
            updateActiveBaseInfo();
            updateCurrentTime();
            renderCountdowns();
            updateTradingSignals();
            updateAccuracy();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
            setInterval(() => {
                updateCurrentTime();
                renderCountdowns();
                if (alertsEnabled) {
                    checkPriceAlerts();
                }
            }, 60000);
            
            setInterval(updateTradingSignals, 30000);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π Telegram
        tg.onEvent('themeChanged', applyTelegramTheme);
        
        tg.onEvent('backButtonClicked', () => {
            tg.close();
        });

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>